import{bD as R,a3 as G,X as N,Q as i,z as C,U as S,R as A,G as Z,bl as q,aS as D,bj as F,bN as M,aa as Q,bO as Y,bP as H,bQ as J,bR as k,ab as U,bS as X,ac as W,a8 as ee,bg as g,ao as te,a$ as ne,ai as le,b8 as oe,b3 as se,P as _,i as ae,ak as E,a6 as P,K as p,N as z,aM as T,E as re,bT as ue}from"./index-0rQbmVkJ.js";const xe=R({type:String,values:G,required:!1}),$=Symbol("size"),ye=()=>{const t=N($,{});return i(()=>C(t.size)||"")},B=Symbol(),I=S();function V(t,e=void 0){const n=A()?N(B,I):I;return t?i(()=>{var l,a;return(a=(l=n.value)==null?void 0:l[t])!=null?a:e}):n}function ie(t,e){const n=V(),l=Z(t,i(()=>{var s;return((s=n.value)==null?void 0:s.namespace)||q})),a=D(i(()=>{var s;return(s=n.value)==null?void 0:s.locale})),o=F(i(()=>{var s;return((s=n.value)==null?void 0:s.zIndex)||M})),u=i(()=>{var s;return C(e)||((s=n.value)==null?void 0:s.size)||""});return ce(i(()=>C(n)||{})),{ns:l,locale:a,zIndex:o,size:u}}const ce=(t,e,n=!1)=>{var l;const a=!!A(),o=a?V():void 0,u=(l=e==null?void 0:e.provide)!=null?l:a?Q:void 0;if(!u)return;const s=i(()=>{const v=C(t);return o!=null&&o.value?de(o.value,v):v});return u(B,s),u(Y,i(()=>s.value.locale)),u(H,i(()=>s.value.namespace)),u(J,i(()=>s.value.zIndex)),u($,{size:i(()=>s.value.size||"")}),(n||!I.value)&&(I.value=s.value),s},de=(t,e)=>{var n;const l=[...new Set([...k(t),...k(e)])],a={};for(const o of l)a[o]=(n=e[o])!=null?n:t[o];return a};function ve(t){let e;const n=S(!1),l=U({...t,originalPosition:"",originalOverflow:"",visible:!1});function a(r){l.text=r}function o(){const r=l.parent,c=m.ns;if(!r.vLoadingAddClassList){let d=r.getAttribute("loading-number");d=Number.parseInt(d)-1,d?r.setAttribute("loading-number",d.toString()):(_(r,c.bm("parent","relative")),r.removeAttribute("loading-number")),_(r,c.bm("parent","hidden"))}u(),b.unmount()}function u(){var r,c;(c=(r=m.$el)==null?void 0:r.parentNode)==null||c.removeChild(m.$el)}function s(){var r;t.beforeClose&&!t.beforeClose()||(n.value=!0,clearTimeout(e),e=window.setTimeout(v,400),l.visible=!1,(r=t.closed)==null||r.call(t))}function v(){if(!n.value)return;const r=l.parent;n.value=!1,r.vLoadingAddClassList=void 0,o()}const f=ee({name:"ElLoading",setup(r,{expose:c}){const{ns:d,zIndex:O}=ie("loading");return c({ns:d,zIndex:O}),()=>{const L=l.spinner||l.svg,j=g("svg",{class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"0 0 50 50",...L?{innerHTML:L}:{}},[g("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),K=l.text?g("p",{class:d.b("text")},[l.text]):void 0;return g(se,{name:d.b("fade"),onAfterLeave:v},{default:te(()=>[ne(le("div",{style:{backgroundColor:l.background||""},class:[d.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[g("div",{class:d.b("spinner")},[j,K])]),[[oe,l.visible]])])})}}}),b=X(f),m=b.mount(document.createElement("div"));return{...W(l),setText:a,removeElLoadingChild:u,close:s,handleAfterLeave:v,vm:m,get $el(){return m.$el}}}let x;const fe=function(t={}){if(!ae)return;const e=me(t);if(e.fullscreen&&x)return x;const n=ve({...e,closed:()=>{var a;(a=e.closed)==null||a.call(e),e.fullscreen&&(x=void 0)}});be(e,e.parent,n),w(e,e.parent,n),e.parent.vLoadingAddClassList=()=>w(e,e.parent,n);let l=e.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",e.parent.setAttribute("loading-number",l),e.parent.appendChild(n.$el),E(()=>n.visible.value=e.visible),e.fullscreen&&(x=n),n},me=t=>{var e,n,l,a;let o;return P(t.target)?o=(e=document.querySelector(t.target))!=null?e:document.body:o=t.target||document.body,{parent:o===document.body||t.body?document.body:o,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:o===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(l=t.lock)!=null?l:!1,customClass:t.customClass||"",visible:(a=t.visible)!=null?a:!0,target:o}},be=async(t,e,n)=>{const{nextZIndex:l}=n.vm.zIndex||n.vm._.exposed.zIndex,a={};if(t.fullscreen)n.originalPosition.value=p(document.body,"position"),n.originalOverflow.value=p(document.body,"overflow"),a.zIndex=l();else if(t.parent===document.body){n.originalPosition.value=p(document.body,"position"),await E();for(const o of["top","left"]){const u=o==="top"?"scrollTop":"scrollLeft";a[o]=`${t.target.getBoundingClientRect()[o]+document.body[u]+document.documentElement[u]-Number.parseInt(p(document.body,`margin-${o}`),10)}px`}for(const o of["height","width"])a[o]=`${t.target.getBoundingClientRect()[o]}px`}else n.originalPosition.value=p(e,"position");for(const[o,u]of Object.entries(a))n.$el.style[o]=u},w=(t,e,n)=>{const l=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?_(e,l.bm("parent","relative")):z(e,l.bm("parent","relative")),t.fullscreen&&t.lock?z(e,l.bm("parent","hidden")):_(e,l.bm("parent","hidden"))},y=Symbol("ElLoading"),h=(t,e)=>{var n,l,a,o;const u=e.instance,s=r=>T(e.value)?e.value[r]:void 0,v=r=>{const c=P(r)&&(u==null?void 0:u[r])||r;return c&&S(c)},f=r=>v(s(r)||t.getAttribute(`element-loading-${ue(r)}`)),b=(n=s("fullscreen"))!=null?n:e.modifiers.fullscreen,m={text:f("text"),svg:f("svg"),svgViewBox:f("svgViewBox"),spinner:f("spinner"),background:f("background"),customClass:f("customClass"),fullscreen:b,target:(l=s("target"))!=null?l:b?void 0:t,body:(a=s("body"))!=null?a:e.modifiers.body,lock:(o=s("lock"))!=null?o:e.modifiers.lock};t[y]={options:m,instance:fe(m)}},ge=(t,e)=>{for(const n of Object.keys(e))re(e[n])&&(e[n].value=t[n])},Ce={mounted(t,e){e.value&&h(t,e)},updated(t,e){const n=t[y];e.oldValue!==e.value&&(e.value&&!e.oldValue?h(t,e):e.value&&e.oldValue?T(e.value)&&ge(e.value,n.options):n==null||n.instance.close())},unmounted(t){var e;(e=t[y])==null||e.instance.close(),t[y]=null}};export{xe as a,V as b,ye as u,Ce as v};
